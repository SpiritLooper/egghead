{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended", ":semanticCommitsDisabled"],
  "commitMessagePrefix": "ðŸŽ¨ Renovate:",

  // this is handled through a specific github action (see .github/workflows/fluxcd.yaml)
  "ignorePaths": ["k8s/flux/flux-system/gotk-components.yaml"],

  "flux": { "managerFilePatterns": ["/k8s/.+\\.ya?ml$/"] },
  "helm-values": { "managerFilePatterns": ["/k8s/.+\\.ya?ml$/"] },
  "kubernetes": { "managerFilePatterns": ["/k8s/.+\\.ya?ml$/"] },
  "minimumReleaseAge": "2 days",
  "packageRules": [
    // allow minor updates if not 0.x
    {
      "matchUpdateTypes": ["minor"],
      "matchCurrentVersion": "!/^0/",
      "automerge": true
    },

    // allow patch and pin, but no digest update 
    {"matchUpdateTypes": ["patch"],"automerge": true},
    { "matchUpdateTypes": ["pin"], "enabled": true },
    { "matchUpdateTypes": ["digest"], "enabled": false },

    // renovate spams too much, so only update once a month
    { 
        "matchPackageNames": ["renovate/renovate"], 
        "automerge": true, 
        "matchUpdateTypes": ["patch","minor"],
        "schedule": ["* * 1 * *"]
    }
  ]
}
